## 数据治理
<h3>NO.1-背景</h3>

```markdown
1.前期数据团队都是以需求驱动（小数仓）的模式发展，为了快速响应业务需求。
2.大量的重复建设的模型、报表等，开发语言多样，团队效率较低，且维护成本较高。
3.模型层面维度、粒度不一致，业务层面业务口径不一致，数据理解成本较高
```

```markdown
前期的的发展这种模式好处是为了快速响应业务的发展，这种模型相对是比较独立灵活的。但是
坏处也是显而易见的，一方面比如履约域、用户域、机构域的数据都基本一致但是前期的这种开发模式
导致了大量的端到端的重复建设，资源浪费比较严重；另一方面由于人员有限且都投入到了业务需求中，
处理大量的取数及临时业务需求导致没有时间做一些公司的数据及业务赋能的沉淀，没有形成公司的
数据资产。
```

<h3>NO.2-规划</h3>

<li>1.建设统一的数据公共层</li>

```markdown
将基本一致的数据域放到公共层进行统一建设，比如之前的用户域，履约、机构域等，这样做的目的是为了
避免重复开发，进行统一的收口，其他业务在开发的过程中不需要再进行相关的构建。快速业务响应基于公共
层进行开发。
```

<li>2.由公共层打通不同业务线，沉淀统一的数据资产</li>

```markdown
    比如用户域、产品域，这样做的目的是将原来的孤岛或不标准的各业务核心数据打通，
以便形成完成的资产沉淀,最后通过沉淀的资产进行业务反哺，不仅提升了数据的复用性，而且可以更加丰富
数据，最终形成良性循环
```

<li>3.进行统一的数据收口及口径管理</li>

```markdown
收口的目的更多的在于由指定的同学按照既定的规范及要求执行避免数据口径的混乱及不一致情况发生。
```

<h3>NO.3-数据治理边界划分</h3>

<li>1.现状盘点</li>

```markdown
面对庞大的历史数据积累，我们首先要对现状进行盘点，清楚的知道每个模型，每个报备表、每个任务的作用
，包括了哪些维度、哪些指标、哪些表
备注：报表A------>业务方----->路径------>是否下线----->涉及维度------>包含指标
#   要进行数据治理，首先我们要知道我们都有哪些数据，摸排数据最好的方法就是进行元数据的盘点。
```

```markdown
1.如何分配盘点任务
    我们将所有的报表、模型、应用都按照数据域进行划分，明确相关任务的owner，做到责任到人
保证团队内部边界划分清晰，避免重复的梳理开发

2.如何提高盘点效率
    利用元数据和血缘关系，将模型、报表、应用的基本信息和范围统一获取到，通过血缘的上下游来
获取依赖的数据源及影响的下游任务，明确影响范围，减少人工逐个盘点的工作量。
```

<li>2.现状收敛</li>

```markdown
    现存的大量报表及模型业务方不明确，使用频率极低。有些开发或业务人员甚至已经离职。但是相关任务却
一直存在，不仅维护成本较高，也占用了大量稀缺的资源。对于现存的报表、模型进行类别划分，分为可下线、
可合并、可使用不同的类别。
```

<h3>NO.5-如何通过模型设计来规范治理数据</hr>

<li>1.数仓分层</li>

```markdown
    数据分层主要是解决数据的存储与管理，以及复杂逻辑的拆分，是对数据的横向管理。对于数据权限的管理和数据
边界的定义也有着重要的意义：
    1.清晰的数据结构：每一个数据分层都有它的作用域和职责，在使用的时候方便的定位和理解数据，并且在
遇到数据质量问题时能够快速的定位到影响的范围以及需要修复的数据范围；
    2.减少重复开发：规范数据分层，开发一些通用的中间层数据，能够极大的降低重复计算，减少烟囱式开发；
    3.统一数据口径：通过数据分层，提供统一的数据分层，统一对外输出的数据口径，避免同一指标不同口径的
情况发生

ODS : 	数据直接从生产同步过来，保留原始数据，便于定位问题
DWD :   存放明细事实数据，只是做简单的数据清洗以及存放退化维度属性，不存放派生指标、衍生指标
DWS :   面向数据域建模，为减少存储通常存放 EDW 的汇总数据，含具体口径的指标的明细数据也应属于该层，
        进一步进行维度属性退化，可以存放派生指标、衍生指标，但是不可以跨数据域存放事实、指标。如涉及用户/订单/流量等多个域的模型时不应放置在该层
ADM :   面向应用建模，数据不跨应用访问，数据基于 EDW、CDM 生成，可以跨数据域存放事实
注意：
    1.DWS、ADM 必须基于 DWD 层进行加工，这就对 DWD 层的完整性提出了要求，数据进入数仓必须要经过
规范约束，同事清晰加工
    2.指标加工必须在 DWS 层或以上进行加工，这就对 DWS 指标的收口和复用提出了要求，指标的加工出口必须
统一，同时上层的查询优先走到 DWS层
    3.DWD、DWS 层的数据开发不跨域，需要加工跨域数据尽量在 ADM 层进行加工。 
```

<li>2.划分数据域</li>
    
```markdown
    数据域是面向业务分析，把业务过程和维度进行抽象的集合，对于一个全新的业务领域，做数据域的划分会帮助
我们认识全局，规划底层的整体建设。
    数据域的划分主要是从纵向来管理数据的，将有较强关联的数据进行概念层次的归类，如上文提到的，我们
的数据治理中数据域不仅是用于归纳数据的，同时也是项目开展时的一个最细的颗粒度，项目的进度和资源的投入
都是以数据域的划分来进行跟踪和分配的。
```

<li>3.定义统一维度</li>

```markdown
    维度建模中最重要的概念 "一致性维度"，为了实现规范，通过系统化的方式来管理，提升维度复用，减少
烟囱式开发。
    维度的定义与维护，需要管理维度主题、维度、维度类型、维度属性与维表之间的关联关系，提供创建维度
关联维表、维护维度属性等功能，需要事先定义好维度主题，从需求中抽象出主题，有机构、用户、机构、产品、资源
、用户、资源、营销、元数据等一级主题
```

<li>4.构建总线矩阵</li>

```markdown
构建总线矩阵的的主要目的就是为了明确每个数据域下面有哪些业务过程，业务过程与哪些维度相关，并定义每个
每个数据域下的业务过程和维度。
```

<li>5.明确指标口径</li>

```markdown
1.指标口径的不一致使得数据的使用成本极高，经常出现口径导致的数据错误，需要反复核对数据，在治理过程中我们需要
梳理所有的指标，对所有的指标明确其口径，如果两个指标名称相同，但是口径不一致，先判断是否能合并，如需要同时
存在，需要再命名上进行区分
2.另外，在数仓的的分层约束中，指标的口径的加工我们会约束到 DWS 层或以上来进行收口，如果指标不存在复用性
则可以在ADM 层进行加工，否则只能在 DWS层进行加工，而且只能有唯一的出口.
```
<li>6.指标管理</li>

```markdown
指标管理分为 原子指标管理和派生指标管理

<li>1.原子指标</li>

```









